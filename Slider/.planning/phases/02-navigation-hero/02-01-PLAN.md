---
phase: 02-navigation-hero
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/providers/SmoothScrollProvider.tsx
  - hooks/useLenis.ts
  - components/layout/Navbar.tsx
  - app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Sticky navbar is visible at top of page on all viewport sizes"
    - "Nav links smooth-scroll to corresponding page sections when clicked"
    - "Navbar background transitions from transparent to solid dark when user scrolls past hero"
    - "CTA button in navbar matches primary Button component styling"
  artifacts:
    - path: "hooks/useLenis.ts"
      provides: "Hook to access Lenis instance from SmoothScrollProvider context"
      exports: ["useLenis"]
    - path: "components/layout/Navbar.tsx"
      provides: "Sticky navbar with logo, section links, scroll-based background, CTA"
      min_lines: 60
    - path: "components/providers/SmoothScrollProvider.tsx"
      provides: "Lenis instance exposed via React context for anchor scrolling"
      contains: "createContext"
  key_links:
    - from: "components/layout/Navbar.tsx"
      to: "hooks/useLenis.ts"
      via: "useLenis hook for scrollTo calls"
      pattern: "useLenis|lenis\\.scrollTo"
    - from: "components/layout/Navbar.tsx"
      to: "window.scrollY"
      via: "passive scroll listener for background transition"
      pattern: "addEventListener.*scroll.*passive"
    - from: "app/layout.tsx"
      to: "components/layout/Navbar.tsx"
      via: "import and render above children"
      pattern: "import.*Navbar"
---

<objective>
Build the sticky navigation bar with Lenis-powered smooth scroll anchor links and scroll-based background transition.

Purpose: The navbar is the first interactive element users encounter. It establishes navigation patterns, sets premium tone with transparent-to-solid scroll transition, and provides persistent access to all page sections and the primary CTA.

Output: Navbar component with desktop layout, scroll state tracking, Lenis anchor link integration, and root layout integration.
</objective>

<execution_context>
@C:\Users\antoi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\antoi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-navigation-hero/02-RESEARCH.md
@components/providers/SmoothScrollProvider.tsx
@components/ui/Button.tsx
@app/layout.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expose Lenis instance via React context and create useLenis hook</name>
  <files>
    components/providers/SmoothScrollProvider.tsx
    hooks/useLenis.ts
  </files>
  <action>
Modify SmoothScrollProvider.tsx to expose the Lenis instance via React context so child components (like Navbar) can call lenis.scrollTo() for anchor links.

1. In SmoothScrollProvider.tsx:
   - Import createContext, useContext, useRef
   - Create a LenisContext: `const LenisContext = createContext<Lenis | null>(null)`
   - Store the Lenis instance in a ref so it persists across renders
   - Wrap children in `<LenisContext.Provider value={lenisRef.current}>`
   - Export LenisContext (named export alongside default component export)

2. Create hooks/useLenis.ts:
   - Import useContext from react
   - Import LenisContext from SmoothScrollProvider
   - Export a `useLenis` hook that returns the Lenis instance from context
   - Return type should be `Lenis | null`

Keep ALL existing Lenis setup code intact (lerp, smoothWheel, 3-line bridge, cleanup). Only add the context wrapper around it.

Do NOT change the Lenis constructor options. Do NOT add anchors: true to the constructor (we will use manual scrollTo calls instead for more control).
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm no TypeScript errors. Verify SmoothScrollProvider still exports default component. Verify hooks/useLenis.ts exports useLenis.
  </verify>
  <done>
SmoothScrollProvider exposes Lenis instance via React context. useLenis hook exists and returns Lenis | null. Existing smooth scroll behavior unchanged.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Navbar component with scroll state, anchor links, and layout integration</name>
  <files>
    components/layout/Navbar.tsx
    app/layout.tsx
  </files>
  <action>
Create the Navbar as a client component at components/layout/Navbar.tsx:

**Component structure:**
- "use client" directive at top
- Import useState, useEffect from react
- Import useLenis from hooks/useLenis
- Import Button from components/ui/Button

**Logo area (left):**
- Text logo "Slider" in font-bold text-xl text-white
- Clicking logo scrolls to top via lenis.scrollTo(0)

**Navigation links (center, hidden on mobile â€” mobile menu is Plan 03):**
- Links: Features (#features), Demo (#demo), Skills (#skills), Use Cases (#use-cases)
- Use `<nav>` with `<ul>` of `<li>` items containing `<button>` elements
- Each button calls `lenis?.scrollTo('#section-id')` on click with e.preventDefault()
- Style: text-stone-300 hover:text-white transition-colors duration-200
- Add `className="hidden md:flex"` to hide on mobile (mobile menu added in Plan 03)

**CTA button (right, hidden on mobile):**
- Use existing Button component: `<Button variant="primary" size="default">Join Waitlist</Button>`
- Add `className="hidden md:block"` to hide on mobile

**Scroll state for background transition:**
- useState for `isScrolled` (boolean, default false)
- useEffect with passive scroll listener: `window.addEventListener('scroll', handleScroll, { passive: true })`
- handleScroll: set isScrolled to `window.scrollY > 50` (50px threshold so slight scroll doesn't trigger)
- Call handleScroll() immediately for initial state
- Cleanup: remove event listener on unmount
- Apply classes: `fixed top-0 left-0 right-0 z-50 transition-all duration-300`
- When NOT scrolled: `bg-transparent`
- When scrolled: `bg-stone-950/95 backdrop-blur-sm shadow-lg`

**Layout:**
- Inner container: `max-w-7xl mx-auto px-4 sm:px-6 lg:px-8`
- Flex row: `flex items-center justify-between h-16 lg:h-20`
- Use semantic `<header>` wrapping the `<nav>` element

**Hamburger button placeholder:**
- Add an empty div with `className="md:hidden"` as placeholder for mobile menu toggle (Plan 03 will replace this)
- This ensures layout doesn't shift when mobile menu is added

**Integration in app/layout.tsx:**
- Import Navbar
- Place `<Navbar />` INSIDE the SmoothScrollProvider but BEFORE {children} so it has access to Lenis context
- Navbar must be inside SmoothScrollProvider to access LenisContext

Do NOT add aria-label attributes for the hamburger yet (Plan 03 handles mobile menu).
  </action>
  <verify>
Run `npm run dev` and verify:
1. Navbar appears fixed at top of page
2. Background is transparent at top, becomes dark/blurred after scrolling ~50px
3. Clicking "Features" scrolls smoothly to #features section
4. Clicking "Demo" scrolls to #demo section
5. Clicking "Skills" scrolls to #skills section
6. Clicking "Use Cases" scrolls to #use-cases section
7. Clicking "Slider" logo scrolls to top
8. CTA button renders with burnt-orange pill shape
9. `npx tsc --noEmit` passes
10. `npm run build` succeeds
  </verify>
  <done>
Navbar renders fixed at top with transparent-to-solid background transition. All desktop nav links smooth-scroll to correct sections via Lenis. Logo scrolls to top. CTA button visible. Layout.tsx updated. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` succeeds without errors
2. Navbar visible on page load with transparent background
3. Scrolling down 50+ pixels triggers background transition to dark/blur
4. Each nav link scrolls to correct section smoothly (not instant jump)
5. Scroll animation uses Lenis (smooth, not native browser scroll)
6. Navbar stays fixed during scroll (position: fixed, z-50)
7. On mobile viewport (<768px), nav links and CTA are hidden (only logo and hamburger placeholder visible)
</verification>

<success_criteria>
- Navbar is sticky (fixed position) with z-50
- Background transitions from transparent to bg-stone-950/95 with backdrop-blur on scroll
- 4 nav links all smooth-scroll to matching section IDs via Lenis scrollTo
- CTA Button rendered with primary variant
- SmoothScrollProvider exposes Lenis via context
- useLenis hook works in Navbar
- Layout.tsx renders Navbar inside SmoothScrollProvider
- TypeScript compiles clean, build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/02-navigation-hero/02-01-SUMMARY.md`
</output>
