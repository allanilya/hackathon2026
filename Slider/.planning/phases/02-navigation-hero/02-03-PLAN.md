---
phase: 02-navigation-hero
plan: 03
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - components/layout/MobileMenu.tsx
  - components/layout/Navbar.tsx
autonomous: false

must_haves:
  truths:
    - "On mobile viewport, hamburger icon is visible and desktop links are hidden"
    - "Tapping hamburger opens a slide-out menu with all nav links"
    - "Mobile menu links smooth-scroll to sections and close the menu"
    - "Pressing Escape key closes the mobile menu"
    - "Menu is keyboard accessible with proper focus management"
  artifacts:
    - path: "components/layout/MobileMenu.tsx"
      provides: "Accessible slide-out mobile navigation menu"
      min_lines: 50
      contains: "aria-expanded"
    - path: "components/layout/Navbar.tsx"
      provides: "Updated navbar integrating MobileMenu component"
      contains: "MobileMenu"
  key_links:
    - from: "components/layout/MobileMenu.tsx"
      to: "hooks/useLenis.ts"
      via: "useLenis hook for mobile anchor scrolling"
      pattern: "useLenis|lenis\\.scrollTo"
    - from: "components/layout/MobileMenu.tsx"
      to: "components/layout/Navbar.tsx"
      via: "Imported and rendered within Navbar"
      pattern: "import.*MobileMenu"
    - from: "components/layout/MobileMenu.tsx"
      to: "keyboard events"
      via: "Escape key handler to close menu"
      pattern: "Escape|keydown"
---

<objective>
Build the accessible mobile hamburger menu with slide-out navigation and integrate it into the existing Navbar.

Purpose: Mobile users need collapsed navigation that is fully accessible (ARIA attributes, keyboard navigation, focus management). This completes the responsive navigation experience and ensures the page works on all devices.

Output: MobileMenu component with slide-out panel, keyboard accessibility, and Navbar integration. Visual checkpoint to verify full nav + hero experience.
</objective>

<execution_context>
@C:\Users\antoi\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\antoi\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-navigation-hero/02-RESEARCH.md
@.planning/phases/02-navigation-hero/02-01-SUMMARY.md
@components/layout/Navbar.tsx
@hooks/useLenis.ts
@components/ui/Button.tsx
@app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MobileMenu component and integrate into Navbar</name>
  <files>
    components/layout/MobileMenu.tsx
    components/layout/Navbar.tsx
  </files>
  <action>
Create components/layout/MobileMenu.tsx as a client component:

**Props interface:**
```typescript
interface MobileMenuProps {
  isOpen: boolean
  onClose: () => void
  links: { label: string; href: string }[]
}
```

**Hamburger toggle button (rendered in Navbar, controls MobileMenu):**
The toggle button lives in Navbar.tsx. MobileMenu receives isOpen state and onClose callback as props.

In Navbar.tsx:
- Add `const [mobileMenuOpen, setMobileMenuOpen] = useState(false)`
- Replace the hamburger placeholder div with a real button:
  ```
  <button
    className="md:hidden p-2 text-stone-300 hover:text-white"
    onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
    aria-label={mobileMenuOpen ? "Close menu" : "Open menu"}
    aria-expanded={mobileMenuOpen}
    aria-controls="mobile-menu"
  >
    {/* Hamburger / X icon using CSS/SVG */}
  </button>
  ```
- Hamburger icon: 3-line SVG when closed, X when open. Use a simple conditional render.
- Import and render MobileMenu: `<MobileMenu isOpen={mobileMenuOpen} onClose={() => setMobileMenuOpen(false)} links={navLinks} />`
- Extract navLinks to a const array at top of component: `const navLinks = [{ label: 'Features', href: '#features' }, { label: 'Demo', href: '#demo' }, { label: 'Skills', href: '#skills' }, { label: 'Use Cases', href: '#use-cases' }]`
- Use this same array for desktop links (refactor desktop links to map over navLinks)

**MobileMenu slide-out panel:**
- "use client" directive
- Import useLenis from @/hooks/useLenis
- Import useEffect, useRef from react
- Import Button from @/components/ui/Button

- Overlay: fixed inset-0 bg-black/50 z-40 (only when isOpen, with opacity transition)
- Panel: fixed top-0 right-0 h-full w-[280px] max-w-[80vw] bg-stone-950 z-50 shadow-2xl
- Slide-in animation: Use CSS transform + transition. When closed: `translate-x-full`. When open: `translate-x-0`. Transition: `transition-transform duration-300 ease-in-out`
- Panel content padding: p-6 pt-20 (account for navbar height)

**Navigation links inside panel:**
- Use semantic `<nav id="mobile-menu">` wrapping a `<ul>` of `<li>` items
- Each link is a `<button>` element (not `<a>` since we use JS scrolling)
- Style: `block w-full text-left py-3 text-lg text-stone-300 hover:text-white border-b border-stone-800 transition-colors`
- On click: call `lenis?.scrollTo(href)` and then `onClose()` to close menu after scrolling
- Do NOT use role="menu"/role="menuitem" — use simple nav with list of links (per RESEARCH.md anti-pattern note)

**CTA in mobile menu:**
- Below nav links, add: `<Button variant="primary" className="w-full mt-6">Join Waitlist</Button>`

**Keyboard accessibility:**
- useEffect: when isOpen, add keydown listener for Escape key to call onClose()
- useEffect: when isOpen, focus the first link in the menu (use a ref on the nav element, query first button)
- useEffect: when isOpen, prevent body scroll by adding `overflow: hidden` to document.body, restore on close/unmount
- Cleanup all listeners and styles on unmount

**Click outside to close:**
- Clicking the overlay (bg-black/50 area) calls onClose()

**Transition handling:**
- Use conditional rendering with CSS transitions. Render the component always but use opacity-0/pointer-events-none when closed, opacity-100/pointer-events-auto when open. This allows CSS transitions to work.
- Alternative: use a simple isOpen conditional with transform transition on the panel itself.
  </action>
  <verify>
Run `npm run dev` and test:
1. Resize browser to mobile viewport (<768px)
2. Desktop nav links hidden, hamburger icon visible
3. Click hamburger — menu slides in from right
4. Click a nav link — page scrolls to section, menu closes
5. Open menu, press Escape — menu closes
6. Open menu, click overlay — menu closes
7. Tab through menu items — focus moves to links
8. `npx tsc --noEmit` passes
9. `npm run build` succeeds
  </verify>
  <done>
Mobile menu slides in from right with all nav links and CTA. Links scroll to sections via Lenis and close menu. Escape key closes menu. Focus management works. Body scroll locked when menu open. Build passes.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 2 navigation and hero experience:
- Sticky navbar with transparent-to-solid scroll transition
- Desktop nav links smooth-scrolling to sections via Lenis
- Mobile hamburger menu with accessible slide-out panel
- Hero section with bold headline, waitlist email form, and PowerPoint sidebar mockup
- GSAP fade-in entrance animation on hero content
  </what-built>
  <how-to-verify>
Run `npm run dev` and open http://localhost:3000 in your browser.

**Desktop verification (viewport > 768px):**
1. Page loads — hero content fades in smoothly (headline, subline, form, mockup)
2. Navbar at top is transparent over hero
3. Scroll down past hero — navbar background transitions to dark/blurred
4. Click "Features" in navbar — page smooth-scrolls to features section
5. Click "Demo" — smooth-scrolls to demo section
6. Click "Skills" — smooth-scrolls to skills section
7. Click "Use Cases" — smooth-scrolls to use-cases section
8. Click "Slider" logo — scrolls back to top
9. Hero headline is large, bold, readable
10. Email input accepts text, "Join Waitlist" button is visible
11. PowerPoint sidebar mockup visible on right side of hero

**Mobile verification (resize to < 768px):**
12. Desktop nav links and CTA hidden
13. Hamburger icon visible
14. Tap hamburger — slide-out menu appears from right
15. Tap a link in mobile menu — scrolls to section, menu closes
16. Open menu, press Escape — menu closes
17. Open menu, tap overlay — menu closes

**Animation verification:**
18. Reload page — hero fades in smoothly
19. Enable "Reduce motion" in OS settings, reload — animation simplified (no movement, just fade)

**Overall feel:**
20. Does the page feel premium? Smooth scrolling, polished transitions, clean layout?
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 2, or describe any issues to address.</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` succeeds
2. Navbar sticky with background transition on scroll
3. All 4 desktop nav links smooth-scroll correctly
4. Mobile hamburger opens slide-out menu
5. Mobile links scroll and close menu
6. Escape key and overlay click close mobile menu
7. Hero displays headline, subline, email input, CTA, mockup visual
8. Hero fade-in animation respects reduced motion preference
9. Page feels premium with smooth, intentional interactions
</verification>

<success_criteria>
- MobileMenu component renders slide-out panel with all nav links
- Hamburger button has aria-expanded, aria-controls, aria-label
- Escape key closes menu
- Focus moves to first menu item on open
- Body scroll locked when menu open
- Mobile links scroll via Lenis and close menu
- CTA button in mobile menu matches primary styling
- Visual checkpoint confirms premium feel across desktop and mobile
</success_criteria>

<output>
After completion, create `.planning/phases/02-navigation-hero/02-03-SUMMARY.md`
</output>
